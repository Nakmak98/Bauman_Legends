(function(e){function t(t){for(var a,o,i=t[0],u=t[1],c=t[2],l=0,d=[];l<i.length;l++)o=i[l],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);m&&m(t);while(d.length)d.shift()();return n.push.apply(n,c||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],a=!0,i=1;i<s.length;i++){var u=s[i];0!==r[u]&&(a=!1)}a&&(n.splice(t--,1),e=o(o.s=s[0]))}return e}var a={},r={app:0},n=[];function o(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=a,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(s,a,function(t){return e[t]}.bind(null,a));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var m=u;n.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"013b":function(e,t,s){},"0810":function(e,t,s){"use strict";var a=s("013b"),r=s.n(a);r.a},1841:function(e,t,s){"use strict";var a=s("8bdd"),r=s.n(a);r.a},3202:function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);s("cadf"),s("551c"),s("f751"),s("097d");var a=s("2b0e"),r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("base-popup"),s("div",{attrs:{id:"nav"}},[s("router-link",{attrs:{to:"/"}},[e._v("Home")]),e._v(" |\n    "),s("router-link",{attrs:{to:"/account"}},[e._v("Account")])],1),s("router-view"),s("base-error-message")],1)},n=[],o={name:"app",data:function(){return{}},updated:function(){this.$store.commit("deleteErrorMessage")},methods:{}},i=o,u=(s("5c0b"),s("2877")),c=Object(u["a"])(i,r,n,!1,null,null,null),m=c.exports,l=s("8c4f"),d=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},p=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("img",{attrs:{alt:"Vue logo",src:s("cf05")}})])}],_={name:"home"},h=_,f=Object(u["a"])(h,d,p,!1,null,null,null),v=f.exports,g=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"auth"},[s("base-button",{attrs:{title:"Войти"},on:{click:function(t){return e.$router.push("/sign_in")}}}),s("base-button",{attrs:{title:"Зарегистрироваться"},on:{click:function(t){return e.$router.push("/sign_up")}}}),s("router-view")],1)},b=[],k={name:"Auth"},y=k,$=Object(u["a"])(y,g,b,!1,null,"3e24c131",null),q=$.exports,w=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.user?s("div",{staticClass:"about"},[s("h1",[e._v("Личный кабинет")]),s("h2",[e._v(e._s(e.user.first_name)+" "+e._s(e.user.last_name))]),s("h2",[e._v(e._s(e.user.login))]),s("h2",[e._v("id: "+e._s(e.user.user_id))]),s("div",["MODERATOR"===e.user.role?s("base-button",{attrs:{title:"Модераторская"},on:{click:function(t){return e.$router.push("/moderator")}}}):e._e(),"ADMIN"===e.user.role?s("base-button",{attrs:{title:"Админка"},on:{click:function(t){return e.$router.push("/admin")}}}):e._e(),e.user.team_id?s("base-button",{attrs:{title:"Моя команда"},on:{click:function(t){return e.$router.push("/team")}}}):e._e(),s("base-button",{attrs:{title:"Удалить аккаунт"},on:{click:e.check_delete_account}}),s("base-button",{attrs:{title:"Выйти"},on:{click:e.check_logout}})],1)]):e._e()},E=[],x=s("bc3a"),M=s.n(x),O=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"account-menu-container",attrs:{id:"account-menu"}},[e._v("\n    Вы ещё не состоите в команде."),s("span",{on:{click:function(t){return e.$router.push({path:"/team/create"})}}},[e._v("Создайте её")]),e._v("\n    или "),s("span",{on:{click:function(t){return e.$router.push("/team/join")}}},[e._v("присоединитесь")]),e._v(" к существующей.\n")])},T=[],j={name:"WithoutTeamPlayer"},P=j,C=(s("7ad5"),Object(u["a"])(P,O,T,!1,null,"4f956032",null)),D=C.exports,A=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.user.team_id?s("div",[s("h2",[e._v("Команда № "+e._s(e.team.team_id))]),s("h2",[e._v(e._s(e.team.search_input_value))]),e.team.invite_code?s("h2",[e._v("Пригласительный код: "),s("br"),e._v(e._s(e.team.invite_code))]):e._e(),s("table",[s("tr",[s("td",[e._v("Имя")]),s("td",[e._v("Фамилия")]),s("td",[e._v("VK")]),"CAPTAIN"===e.user.role?s("td",[e._v("Удалить участника")]):e._e()]),e._l(e.team_members,function(t){return s("tr",[s("td",[e._v(e._s(t.first_name))]),s("td",[e._v(e._s(t.last_name))]),s("td",[e._v(e._s(t.vk_ref))]),"CAPTAIN"===e.user.role?s("td",{staticClass:"kick-btn",on:{click:function(s){return e.check_delete_action(t)}}},["PLAYER"===t.role?s("span",[e._v("X")]):e._e()]):e._e()])})],2),s("base-button",{attrs:{title:"Старт!"}}),s("base-button",{attrs:{title:"Выйти из команды"},on:{click:e.check_leave_team}})],1):e._e()},U=[],I={name:"WithTeamPlayer",data:function(){return{request_body:{user_id:""},check_join:!1,popup_message:""}},computed:{team_members:function(){return this.$store.state.team_members},team:function(){return this.$store.state.team},user:function(){return this.$store.state.user}},methods:{check_leave_team:function(){var e={message:"Вы уверены, что хотите покинуть команду?",placeholder:"",input_field:!1,show:!0,callback:this.leave_team,args:null};this.$store.commit("setPopupOptions",e)},check_delete_action:function(e){this.request_body.user_id=e.user_id;var t={message:"Вы уверены, что хотите удалить "+e.first_name+"?",placeholder:"",input_field:!1,show:!0,callback:this.delete_member,args:this.request_body};this.$store.commit("setPopupOptions",t)},delete_member:function(e){var t=this;M.a.delete("/team/kick",{params:e}).then(function(){t.$store.dispatch("updateTeamMembers")}).catch(function(e){console.log(e.response.status),401===e.response.status?(t.$router.push("/auth"),t.$store.commit("setErrorMessage",{header:"Ошибка авторизации",message:e.response.data.message})):t.$store.commit("setErrorMessage",{header:"Ошибка",message:e.response.data.message})})},leave_team:function(){var e=this;M.a.delete("/team/leave").then(function(t){e.$store.commit("deleteTeamData"),e.$store.dispatch("updateUserData"),e.$store.commit("deleteTeamMembers")}).catch(function(t){console.log(t.response.status),401===t.response.status?(e.$router.push("/auth"),e.$store.commit("setErrorMessage",{header:"Ошибка авторизации",message:t.response.data.message})):e.$store.commit("setErrorMessage",{header:"Ошибка",message:t.response.data.message})})}}},R=I,N=(s("f5c5"),Object(u["a"])(R,A,U,!1,null,null,null)),S=N.exports,L={name:"account",data:function(){return{error_message:"",popup_message:""}},computed:{user:function(){return this.$store.state.user}},mounted:function(){this.user||this.request_user_data()},methods:{check_delete_account:function(){var e={message:"Вы уверены, что хотите удалить аккаунт?",placeholder:"",input_field:!1,show:!0,callback:this.delete_account,args:null};this.$store.commit("setPopupOptions",e)},check_logout:function(){var e={message:"Вы уверены, что хотите выйти из аккаунта?",placeholder:"",input_field:!1,show:!0,callback:this.logout,args:null};this.$store.commit("setPopupOptions",e)},delete_account:function(){var e=this;M.a.delete("/user/delete").then(function(t){console.log(t.status),console.log(t.data),e.$store.commit("deleteUserData"),e.$store.commit("deleteTeamData"),e.$store.commit("deleteTeamMembers"),e.$router.push("/auth")}).catch(function(t){e.$store.commit("setErrorMessage",{header:"Ошибка",message:t.response.data.message})})},logout:function(){var e=this;M.a.get("/user/logout").then(function(t){console.log(t.status),e.$store.commit("deleteUserData"),e.$store.commit("deleteTeamData"),e.$store.commit("deleteTeamMembers"),e.$router.push("/auth")})},request_user_data:function(){var e=this;M.a.get("/user/info").then(function(t){e.$store.commit("setUserData",t.data)}).catch(function(t){t.response&&401===t.response.status&&(e.$router.push("/auth"),e.$store.commit("setErrorMessage",{header:"Ошибка авторизации",message:t.response.data.message}))})}}},H=L,B=Object(u["a"])(H,w,E,!1,null,null,null),F=B.exports,V=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("base-input",{attrs:{type:"text",placeholder:"Логин"},model:{value:e.request_body.login,callback:function(t){e.$set(e.request_body,"login","string"===typeof t?t.trim():t)},expression:"request_body.login"}}),s("base-input",{attrs:{type:"password",placeholder:"Пароль"},model:{value:e.request_body.password,callback:function(t){e.$set(e.request_body,"password","string"===typeof t?t.trim():t)},expression:"request_body.password"}}),s("base-button",{attrs:{title:"Войти"},on:{click:e.sign_in}})],1)},G=[],W={name:"SignIn",data:function(){return{request_body:{login:"",password:""},error_header:"Ошибка авторизации"}},methods:{sign_in:function(){var e=this;this.valid(this)&&M.a.post("/user/sign_in",this.request_body).then(function(t){console.log(t.data),e.$store.commit("setUserData",t.data),e.redirect(t.data.role)}).catch(function(t){t.response&&(console.log(t.response.status),400===t.response.status&&e.$store.commit("setErrorMessage",{header:e.error_header,message:"Неверный логин / пароль"}))})},valid:function(e){for(var t in e.request_body)if(""===e.request_body[t])return this.$store.commit("setErrorMessage",{header:this.error_header,message:"Заполните все поля формы"}),!1;return!/[а-я]/g.test(e.request_body.login)||(this.$store.commit("setErrorMessage",{header:this.error_header,message:"Поля не должны содержать кириллицу"}),!1)},redirect:function(e){this.$router.push("/account"),"MODERATOR"===e&&this.$router.push("/moderator")}}},J=W,K=Object(u["a"])(J,V,G,!1,null,"32511109",null),X=K.exports,Y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("base-input",{attrs:{type:"text",placeholder:"Имя"},model:{value:e.request_body.first_name,callback:function(t){e.$set(e.request_body,"first_name",t)},expression:"request_body.first_name"}}),s("base-input",{attrs:{type:"text",placeholder:"Фамилия"},model:{value:e.request_body.last_name,callback:function(t){e.$set(e.request_body,"last_name",t)},expression:"request_body.last_name"}}),s("base-input",{attrs:{type:"text",placeholder:"Группа"},model:{value:e.request_body.group,callback:function(t){e.$set(e.request_body,"group",t)},expression:"request_body.group"}}),s("base-input",{attrs:{type:"text",placeholder:"Логин"},model:{value:e.request_body.login,callback:function(t){e.$set(e.request_body,"login",t)},expression:"request_body.login"}}),s("base-input",{attrs:{type:"text",placeholder:"vk.сom/id"},model:{value:e.request_body.vk_ref,callback:function(t){e.$set(e.request_body,"vk_ref",t)},expression:"request_body.vk_ref"}}),s("base-input",{attrs:{type:"password",placeholder:"Пароль"},model:{value:e.request_body.password,callback:function(t){e.$set(e.request_body,"password",t)},expression:"request_body.password"}}),s("base-input",{attrs:{type:"password",placeholder:"Подтверждение пароля"},model:{value:e.confirm_password,callback:function(t){e.confirm_password=t},expression:"confirm_password"}}),s("base-button",{attrs:{title:"Зарегистрироваться"},on:{click:e.sign_up}})],1)},z=[],Q={name:"signUp",data:function(){return{request_body:{first_name:"",last_name:"",login:"",password:"",group:"",vk_ref:"vk.com/"},confirm_password:"",error_header:"Ошибка регистрации"}},methods:{sign_up:function(){var e=this;this.valid()&&M.a.post("/user/sign_up",this.request_body).then(function(t){e.$store.commit("setUserData",t.data),e.$router.push("/account")}).catch(function(t){console.log(t),e.$store.commit("setErrorMessage",{header:e.error_header,message:t.response.data.message})})},valid:function(){for(var e in this.request_body)if(""===this.request_body[e])return this.$store.commit("setErrorMessage",{header:this.error_header,message:"Заполните все поля формы"}),!1;return/[0-9]/g.test(this.request_body.first_name)||/[0-9]/g.test(this.request_body.last_name)?(this.$store.commit("setErrorMessage",{header:this.error_header,message:"Имя или фамилия не должны содержать цифр"}),!1):/[а-я]/g.test(this.request_body.login)?(this.$store.commit("setErrorMessage",{header:this.error_header,message:"Логин не должен содержать кириллицу"}),!1):this.request_body.password===this.confirm_password||(this.$store.commit("setErrorMessage",{header:this.error_header,message:"Пароли не совпадают"}),!1)}}},Z=Q,ee=Object(u["a"])(Z,Y,z,!1,null,"161c0f49",null),te=ee.exports,se=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"create-team"}},[e.create_status?s("div",[s("p",[e._v("Команда успешно создана!")]),s("p",[e._v("Перейдите в личный кабинет, чтобы просмотерть сведения о команде.")])]):s("div",[s("h1",[e._v("Создание команды")]),s("base-input",{attrs:{type:"text",placeholder:"Название команды"},model:{value:e.team_name,callback:function(t){e.team_name=t},expression:"team_name"}}),s("base-button",{attrs:{title:"Создать"},on:{click:e.check_create_team}})],1)])},ae=[],re={name:"CreateTeam",data:function(){return{team_name:"",create_status:!1}},methods:{check_create_team:function(){""!==this.team_name?this.create_team():this.$store.commit("setErrorMessage",{header:"Ошибка",message:"Поле не должно быть пустым"})},create_team:function(){var e=this;M.a.post("/team/create",{team_name:this.team_name}).then(function(t){e.$store.commit("setTeamData",t.data),e.$store.dispatch("updateUserData"),e.create_status=!0}).catch(function(t){t.response&&(401===t.response.status?(e.$router.push("/auth"),e.$store.commit("setErrorMessage",{header:"Ошибка авторизации",message:t.response.data.message})):e.$store.commit("setErrorMessage",{header:"Ошибка",message:t.response.data.message}))})}}},ne=re,oe=Object(u["a"])(ne,se,ae,!1,null,"47018bb4",null),ie=oe.exports,ue=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h1",[e._v("Поиск команды")]),s("base-input",{attrs:{type:"text",placeholder:"Название / номер команды"},model:{value:e.search_input_value,callback:function(t){e.search_input_value=t},expression:"search_input_value"}}),s("h1",[e._v("Выберите команду")]),s("div",{staticClass:"teams-list"},e._l(e.search_team,function(t){return s("option",{staticClass:"team-option",domProps:{value:t.team_id},on:{click:e.select}},[e._v("\n            "+e._s(t.team_id)+" "+e._s(t.team_name)+"\n        ")])}),0),s("base-button",{attrs:{title:"Вступить в команду"},on:{click:e.check_join}})],1)},ce=[],me=(s("55dd"),s("ac4d"),s("8a81"),s("ac6a"),s("6b54"),s("4917"),s("3b2b"),{name:"JoinToTeam",data:function(){return{request_body:{team_id:0,invite_code:""},search_input_value:"",popup_message:"Введите пригласительный код",teams:[]}},mounted:function(){this.request_teams()},computed:{search_team:function(){var e=new RegExp(this.search_input_value,"i");return this.teams.filter(function(t){return t.team_name.match(e)||t.team_id.toString().match(e)})}},methods:{check_join:function(){if(0!==this.request_body.team_id){var e={message:"Введите пригласительный код",placeholder:"Пригласительный код",input_field:!0,show:!0,callback:this.join_team,args:this.request_body};this.$store.commit("deleteErrorMessage"),this.$store.commit("setPopupOptions",e)}else this.$store.commit("setErrorMessage",{header:"Ошибка",message:"Необходимо выбрать команду из списка"})},select:function(e){var t=e.target,s=document.getElementsByClassName("team-option"),a=!0,r=!1,n=void 0;try{for(var o,i=s[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var u=o.value;u.style.backgroundColor=""}}catch(c){r=!0,n=c}finally{try{a||null==i.return||i.return()}finally{if(r)throw n}}t.style.backgroundColor="green",this.request_body.team_id=t.value},request_teams:function(){var e=this;M.a.get("/team/all").then(function(t){console.log(t.data),e.teams=t.data.sort(function(e,t){return e.team_id>t.team_id?1:e.team_id<t.team_id?-1:0})})},join_team:function(e,t){var s=this;""!=t?(e.invite_code=t,M.a.post("/team/join",e).then(function(e){s.$store.commit("setTeamData",e.data),s.$store.dispatch("updateUserData"),s.$router.push("/account")}).catch(function(e){e.response&&(console.log(e.response.status),401===e.response.status?(s.$router.push("/auth"),s.$store.commit("setErrorMessage",{header:"Ошибка авторизации",message:e.response.data.message})):400==e.response.status?s.$store.commit("setErrorMessage",{header:"Ошибка",message:e.response.data.message}):e.response.status>401&&s.$store.commit("setErrorMessage",{header:"Ошибка",message:e.response.data.message}))})):this.$store.commit("setErrorMessage",{header:"Ошибка",message:"Поле не должно быть пустым"})}}}),le=me,de=(s("a15d"),Object(u["a"])(le,ue,ce,!1,null,"1596db38",null)),pe=de.exports,_e=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h2",[e._v("Моя команда")]),s("with-team-player"),e.user.team_id?e._e():s("without-team-player")],1)},he=[],fe={name:"Team",components:{WithTeamPlayer:S,WithoutTeamPlayer:D},computed:{user:function(){return this.$store.state.user}},mounted:function(){this.team_members||this.request_team_members(),this.team||this.request_team_data(),this.user||this.request_user_data()},methods:{request_user_data:function(){var e=this;M.a.get("/user/info").then(function(t){e.$store.commit("setUserData",t.data)}).catch(function(t){t.response&&401===t.response.status&&(e.$router.push("/auth"),e.$store.commit("setErrorMessage",{header:"Ошибка авторизации",message:t.response.data.message}))})},request_team_members:function(){var e=this;M.a.get("/team/members").then(function(t){e.$store.commit("setTeamMembers",t.data)}).catch(function(t){t.response&&(console.log(t.response.status),console.log(t.response.data.message),401===t.response.status?(e.$route.push("/auth"),e.$store.commit("setErrorMessage",{header:"Ошибка авторизации",message:t.response.data.message})):404===t.response.status||e.$store.commit("setErrorMessage",{header:"Ошибка",message:t.response.data.message}))})},request_team_data:function(){var e=this;M.a.get("/team/info").then(function(t){e.$store.commit("setTeamData",t.data),e.$store.dispatch("updateUserData")}).catch(function(t){if(t.response)if(401===t.response.status)e.$router.push("/auth"),e.$store.commit("setErrorMessage",{header:"Ошибка авторизации",message:t.response.data.message});else{if(404===t.response.status)return;e.$store.commit("setErrorMessage",{header:"Ошибка",message:t.response.data.message})}})}}},ve=fe,ge=Object(u["a"])(ve,_e,he,!1,null,"09b91da7",null),be=ge.exports,ke=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h2",[e._v("Главная страница модератора")]),s("base-button",{attrs:{title:"Создать задание"},on:{click:function(t){return e.$router.push("/moderator/create_task")}}}),s("all-tasks")],1)},ye=[],$e=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h3",[e._v("Основные задания:")]),s("div",{staticClass:"task-container"},e._l(e.main_tasks,function(t){return s("div",{staticClass:"task-card",on:{click:function(s){return e.$router.push({name:"edit_task",params:{task_id:t.task_id}})}}},[s("h2",[e._v(e._s(t.task_id))]),s("p",[e._v(e._s(t.task_name))])])}),0),s("h3",[e._v("Фотоквесты:")]),s("div",{staticClass:"task-container"},e._l(e.photo_tasks,function(t){return s("div",{staticClass:"task-card",on:{click:function(s){return e.$router.push({name:"edit_task",params:{task_id:t.task_id}})}}},[s("h2",[e._v(e._s(t.task_id))]),s("p",[e._v(e._s(t.task_name))])])}),0),s("h3",[e._v("Логика:")]),e._l(e.logic_tasks,function(t){return s("div",{staticClass:"task-card",on:{click:function(s){return e.$router.push({name:"edit_task",params:{task_id:t.task_id}})}}},[s("h2",[e._v(e._s(t.task_id))]),s("p",[e._v(e._s(t.task_name))])])}),s("h3",[e._v("Черновик:")]),e._l(e.draft_tasks,function(t){return s("div",{staticClass:"task-card",on:{click:function(s){return e.$router.push({name:"edit_task",params:{task_id:t.task_id}})}}},[s("h2",[e._v(e._s(t.task_id))]),s("p",[e._v(e._s(t.task_name))])])})],2)},qe=[],we=(s("96cf"),s("3b8d")),Ee={name:"AllTasks",data:function(){return{tasks:[]}},computed:{user:function(){return this.$store.state.user},photo_tasks:function(){return this.tasks.filter(function(e){return"PHOTO"===e.task_type})},main_tasks:function(){return this.tasks.filter(function(e){return"MAIN"===e.task_type})},draft_tasks:function(){return this.tasks.filter(function(e){return"DRAFT"===e.task_type})},logic_tasks:function(){return this.tasks.filter(function(e){return"LOGIC"===e.task_type})}},mounted:function(){this.request_all_tasks()},methods:{request_all_tasks:function(){var e=this;M.a.get("/task/all").then(function(t){e.tasks=t.data}).catch(function(){var t=Object(we["a"])(regeneratorRuntime.mark(function t(s){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!s.response){t.next=8;break}if(401!==s.response.status){t.next=7;break}return t.next=4,e.$router.push("auth");case 4:e.$store.commit("setErrorMessage",{header:"Ошибка авторизации",message:s.response.data.message}),t.next=8;break;case 7:e.$store.commit("setErrorMessage",{header:"Ошибка",message:s.response.data.message});case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}}},xe=Ee,Me=(s("a358"),Object(u["a"])(xe,$e,qe,!1,null,"c8aaf89a",null)),Oe=Me.exports,Te={name:"ModeratorView",components:{AllTasks:Oe}},je=Te,Pe=Object(u["a"])(je,ke,ye,!1,null,"7dce76e8",null),Ce=Pe.exports,De=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("label",{attrs:{for:"task_name"}},[e._v("Название задания")]),s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.request_body.task_name,expression:"request_body.task_name"}],attrs:{required:"",type:"text",id:"task_name"},domProps:{value:e.request_body.task_name},on:{input:function(t){t.target.composing||e.$set(e.request_body,"task_name",t.target.value)}}})]),s("div",[s("select",{directives:[{name:"model",rawName:"v-model",value:e.request_body.task_type,expression:"request_body.task_type"}],attrs:{required:""},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.request_body,"task_type",t.target.multiple?s:s[0])}}},[s("option",{attrs:{disabled:"",value:""}},[e._v("Тип задания")]),s("option",{domProps:{value:e.type_enum.MAIN}},[e._v("Главное")]),s("option",{domProps:{value:e.type_enum.PHOTO}},[e._v("Фотозадание")]),s("option",{domProps:{value:e.type_enum.LOGIC}},[e._v("Логика")]),s("option",{domProps:{value:e.type_enum.DRAFT}},[e._v("Черновик")])])]),s("label",{attrs:{for:"points"}},[e._v("Количество очков")]),s("div",[s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.request_body.points,expression:"request_body.points",modifiers:{number:!0}}],attrs:{type:"number",id:"points"},domProps:{value:e.request_body.points},on:{input:function(t){t.target.composing||e.$set(e.request_body,"points",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})]),s("label",{attrs:{for:"duration"}},[e._v("Длительность")]),s("div",[s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.request_body.duration,expression:"request_body.duration",modifiers:{number:!0}}],attrs:{type:"number",id:"duration"},domProps:{value:e.request_body.duration},on:{input:function(t){t.target.composing||e.$set(e.request_body,"duration",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})]),s("label",{attrs:{for:"capacity"}},[e._v("Пропускная способность")]),s("div",[s("input",{directives:[{name:"model",rawName:"v-model.number",value:e.request_body.capacity,expression:"request_body.capacity",modifiers:{number:!0}}],attrs:{type:"number",id:"capacity"},domProps:{value:e.request_body.capacity},on:{input:function(t){t.target.composing||e.$set(e.request_body,"capacity",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})]),s("label",{attrs:{for:"answers"}},[e._v("Ответы")]),s("div",[s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.answer,expression:"answer"}],attrs:{required:"",type:"text",id:"answers"},domProps:{value:e.answer},on:{input:function(t){t.target.composing||(e.answer=t.target.value)}}}),s("span",{staticClass:"push-answer",on:{click:e.push_answer}},[e._v("+")])]),s("div",e._l(e.request_body.answers,function(t){return s("span",[e._v(e._s(t)+", ")])}),0),s("span",{staticClass:"clear-answers",on:{click:function(t){e.request_body.answers=[],e.answer=""}}},[e._v("Очистить ответы")])]),s("vue-editor",{attrs:{id:"editor",useCustomImageHandler:""},on:{"image-added":e.handleImageAdded},model:{value:e.request_body.html,callback:function(t){e.$set(e.request_body,"html",t)},expression:"request_body.html"}}),this.$route.params.task_id?s("button",{on:{click:e.update_task}},[e._v("Обновить")]):e._e(),this.$route.params.task_id?s("button",{on:{click:e.delete_task}},[e._v("Удалить задание")]):s("button",{on:{click:e.send_task}},[e._v("Сохранить")]),s("div",{attrs:{id:"succes_update"}})],1)},Ae=[],Ue=(s("7f7f"),s("5873")),Ie={name:"TaskEditor",components:{VueEditor:Ue["a"]},data:function(){return{request_body:{task_id:null,task_name:"",task_type:"",points:1,duration:1,capacity:1,html:"",answers:[],img_path:""},type_enum:{PHOTO:"PHOTO",LOGIC:"LOGIC",MAIN:"MAIN",DRAFT:"DRAFT"},saved:!1,answer:""}},mounted:function(){this.$route.params.task_id?this.request_task_info():this.get_task_id()},methods:{delete_task:function(){var e=this;M.a.delete("task",{params:{task_id:this.$route.params.task_id}}).then(function(){e.$router.push("/moderator")}).catch(function(t){t.response&&(401===t.response.status?(e.$router.push("auth"),e.$store.commit("setErrorMessage",{header:"Ошибка авторизации",message:t.response.data.message})):e.$store.commit("setErrorMessage",{header:"Ошибка",message:t.response.data.message}))})},get_task_id:function(){var e=this;M.a.get("/task/all").then(function(t){var s=t.data;s.sort(function(e,t){return e.task_id>t.task_id?-1:e.task_id<t.task_id?1:0}),console.log(s[0].task_id),e.request_body.task_id=s[0].task_id+1})},handleImageAdded:function(e,t,s,a){var r=this;console.log(e.name);var n=new FormData;n.append("image",e),M.a.post("/task/image",n).then(function(e){console.log(e.data),r.request_body.img_path=M.a.defaults.baseURL+e.data,t.insertEmbed(s,"image",r.request_body.img_path),a()}).catch(function(e){console.log(e)})},request_task_info:function(){var e=this;M.a.get("/task/",{params:{task_id:this.$route.params.task_id}}).then(function(t){e.request_body=t.data}).catch(function(){var t=Object(we["a"])(regeneratorRuntime.mark(function t(s){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!s.response){t.next=8;break}if(401!==s.response.status){t.next=7;break}return t.next=4,e.$router.push("auth");case 4:e.$store.commit("setErrorMessage",{header:"Ошибка авторизации",message:s.response.data.message}),t.next=8;break;case 7:e.$store.commit("setErrorMessage",{header:"Ошибка",message:s.response.data.message});case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())},push_answer:function(){this.request_body.answers.push(this.answer),this.answer=""},send_task:function(){var e=this;this.valid()&&M.a.post("/task",this.request_body).then(function(){e.$router.push({name:"edit_task",params:{task_id:e.request_body.task_id}})}).catch(function(t){t.response&&(401===t.response.status?(e.$router.push("auth"),e.$store.commit("setErrorMessage",{header:"Ошибка авторизации",message:t.response.data.message})):e.$store.commit("setErrorMessage",{header:"Ошибка",message:t.response.data.message}))})},update_task:function(){var e=this;M.a.put("/task",this.request_body).then(function(t){e.saved=!0,console.log(t)}).catch(function(t){t.response&&(401===t.response.status?(e.$router.push("auth"),e.$store.commit("setErrorMessage",{header:"Ошибка авторизации",message:t.response.data.message})):e.$store.commit("setErrorMessage",{header:"Ошибка",message:t.response.data.message}))})},valid:function(){return""===this.request_body.task_type?(this.$store.commit("setErrorMessage",{header:"Ошибка",message:"Определите тип задания"}),!1):(this.$store.commit("deleteErrorMessage"),!0)}}},Re=Ie,Ne=(s("0810"),Object(u["a"])(Re,De,Ae,!1,null,null,null)),Se=Ne.exports;a["a"].use(l["a"]);var Le=new l["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:v},{path:"/account",name:"account",component:F},{path:"/auth",name:"auth",component:q},{path:"/sign_in",name:"sign_in",component:X},{path:"/sign_up",name:"sign_up",component:te},{path:"/team",component:be},{path:"/team/create",name:"team_create",component:ie},{path:"/team/join",name:"join",component:pe},{path:"/moderator",name:"moderator",component:Ce},{path:"/moderator/create_task",name:"create_task",component:Se},{path:"/moderator/edit_task/:task_id",name:"edit_task",component:Se}]}),He=Le,Be=s("2f62");a["a"].use(Be["a"]);var Fe={message:"",placeholder:"",input_field:!1,show:!1,callback:null,args:null},Ve={header:null,message:null},Ge=new Be["a"].Store({state:{user:null,team:null,team_members:null,error:Ve,popup:Fe},mutations:{setUserData:function(e,t){e.user=t},setTeamData:function(e,t){e.team=t},setTeamMembers:function(e,t){e.team_members=t},setPopupOptions:function(e,t){e.popup=t},setPopupInputValue:function(e,t){e.popup.value=t},setErrorMessage:function(e,t){e.error=t},deleteTeamMembers:function(e){e.team_members=null},deleteTeamData:function(e){e.team=null},deleteUserData:function(e){e.user=null},deletePopupOptions:function(e){e.popup=Fe},deleteErrorMessage:function(e){e.error=Ve}},getters:{getUserData:function(e){return e.user},getTeamData:function(e){return e.team}},actions:{updateUserData:function(e){M.a.get("/user/info").then(function(t){e.commit("setUserData",t.data)})},updateTeamMembers:function(e){M.a.get("/team/members").then(function(t){e.commit("setTeamMembers",t.data)})}}}),We=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("button",{on:{click:function(t){return e.$emit("click")}}},[e._v(e._s(e.title))])])},Je=[],Ke={name:"BaseButton",props:{title:String}},Xe=Ke,Ye=(s("1841"),Object(u["a"])(Xe,We,Je,!1,null,"2ecdd293",null)),ze=Ye.exports,Qe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("input",e._b({attrs:{type:e.type,placeholder:e.placeholder},on:{input:function(t){return e.$emit("input",t.target.value)}}},"input",e.$attrs,!1))])},Ze=[],et={name:"BaseInput",inheritAttrs:!1,props:{type:String,placeholder:String}},tt=et,st=Object(u["a"])(tt,Qe,Ze,!1,null,"590d7b4d",null),at=st.exports,rt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("transition",[e.error.message?s("div",{staticClass:"error-message-container"},[s("div",{staticClass:"error-content"},[s("h3",[e._v(e._s(e.error.header))]),s("p",[e._v(e._s(e.error.message))])])]):e._e()])},nt=[],ot={name:"ErrorMessage",computed:{error:function(){return this.$store.state.error}}},it=ot,ut=Object(u["a"])(it,rt,nt,!1,null,"3a0cbf1e",null),ct=ut.exports,mt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"popup-container"},[s("transition",{attrs:{name:"fade"}},[e.popup.show?s("div",{staticClass:"base-popup"},[s("h1",[e._v("Подтверждение")]),s("div",{staticClass:"popup-message"},[e._v("\n                "+e._s(e.popup.message)+"\n            ")]),e.popup.input_field?s("base-input",{attrs:{type:"text"},model:{value:e.input_value,callback:function(t){e.input_value=t},expression:"input_value"}}):e._e(),s("base-button",{attrs:{title:"ОК"},on:{click:e.handleAccess}}),s("base-button",{attrs:{title:"Отмена"},on:{click:function(t){e.popup.show=!1}}})],1):e._e()])],1)},lt=[],dt={name:"BasePopup",data:function(){return{input_value:""}},computed:{popup:function(){return this.$store.state.popup}},methods:{handleAccess:function(){""!==this.input_value?this.popup.callback(this.popup.args,this.input_value):this.popup.callback(this.popup.args),this.$store.commit("deletePopupOptions")}}},pt=dt,_t=(s("7afa"),Object(u["a"])(pt,mt,lt,!1,null,null,null)),ht=_t.exports;M.a.defaults.baseURL="http://5.23.54.233:5050",M.a.defaults.withCredentials=!0,a["a"].component("base-button",ze),a["a"].component("base-input",at),a["a"].component("base-error-message",ct),a["a"].component("base-popup",ht),a["a"].config.productionTip=!1,new a["a"]({router:He,store:Ge,render:function(e){return e(m)}}).$mount("#app")},"5c0b":function(e,t,s){"use strict";var a=s("e332"),r=s.n(a);r.a},"7ad5":function(e,t,s){"use strict";var a=s("8fee"),r=s.n(a);r.a},"7afa":function(e,t,s){"use strict";var a=s("ac0f"),r=s.n(a);r.a},"8bdd":function(e,t,s){},"8d36":function(e,t,s){},"8fee":function(e,t,s){},a15d:function(e,t,s){"use strict";var a=s("f6c1"),r=s.n(a);r.a},a358:function(e,t,s){"use strict";var a=s("8d36"),r=s.n(a);r.a},ac0f:function(e,t,s){},cf05:function(e,t,s){e.exports=s.p+"img/logo.82b9c7a5.png"},e332:function(e,t,s){},f5c5:function(e,t,s){"use strict";var a=s("3202"),r=s.n(a);r.a},f6c1:function(e,t,s){}});
//# sourceMappingURL=app.c907faae.js.map