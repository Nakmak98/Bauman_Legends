(function(e){function t(t){for(var r,a,u=t[0],i=t[1],l=t[2],d=0,p=[];d<u.length;d++)a=u[d],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&p.push(n[a][0]),n[a]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);c&&c(t);while(p.length)p.shift()();return s.push.apply(s,l||[]),o()}function o(){for(var e,t=0;t<s.length;t++){for(var o=s[t],r=!0,u=1;u<o.length;u++){var i=o[u];0!==n[i]&&(r=!1)}r&&(s.splice(t--,1),e=a(a.s=o[0]))}return e}var r={},n={app:0},s=[];function a(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=e,a.c=r,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(o,r,function(t){return e[t]}.bind(null,r));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],i=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var c=i;s.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"56d7":function(e,t,o){"use strict";o.r(t);o("cadf"),o("551c"),o("f751"),o("097d");var r=o("2b0e"),n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("div",{attrs:{id:"nav"}},[o("router-link",{attrs:{to:"/"}},[e._v("Home")]),e._v(" |\n    "),o("router-link",{attrs:{to:"/account"}},[e._v("Account")])],1),o("router-view")],1)},s=[],a={name:"app",data:function(){return{test:""}}},u=a,i=(o("5c0b"),o("2877")),l=Object(i["a"])(u,n,s,!1,null,null,null),c=l.exports,d=o("8c4f"),p=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},v=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("img",{attrs:{alt:"Vue logo",src:o("cf05")}})])}],m={name:"home",data:function(){return{}}},f=m,_=Object(i["a"])(f,p,v,!1,null,null,null),g=_.exports,h=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"auth"},[o("button",{on:{click:function(t){return e.$router.push("/sign_in")}}},[e._v("Войти")]),o("button",{on:{click:function(t){return e.$router.push("/sign_up")}}},[e._v("Зарегистрироваться")]),o("router-view")],1)},b=[],y={name:"Auth"},w=y,q=Object(i["a"])(w,h,b,!1,null,"1f98a196",null),$=q.exports,x=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"about"},[e._l(e.requestUserData,function(t){return o("ul",[o("p",[e._v(e._s(t))])])}),o("button",{on:{click:e.delete_account}},[e._v("Удалить аккаунт")]),o("button",{on:{click:e.logout}},[e._v("Выйти")])],2)},k=[],U=o("bc3a"),M=o.n(U),O={name:"account",data:function(){return{user:{}}},beforeCreate:function(){var e=this;this.$store.getters.checkUserData?this.user=this.$store.getters.getUserData:M.a.get("/user/info").then(function(t){console.log(t.data),e.$store.commit("setUserData",t.data)}).catch(function(t){401===t.response.status?e.$router.push("/auth"):e.$router.push("/error")})},computed:{requestUserData:function(){return this.$store.getters.getUserData}},methods:{logout:function(){var e=this;M.a.get("/user/logout").then(function(t){console.log(t.status),e.$store.commit("deleteUserData"),e.$router.push("/auth")})},delete_account:function(){var e=this;M.a.delete("/user/delete").then(function(t){console.log(t.status),e.$store.commit("deleteUserData"),e.$router.push("/auth")}).catch(function(e){console.log(e.response.status),401===e.response.status&&e.message})}}},D=O,P=Object(i["a"])(D,x,k,!1,null,null,null),j=P.exports,E=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[e.validationMessage?o("div",[e._v(e._s(e.validationMessage))]):e._e(),o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.request_body.login,expression:"request_body.login"}],attrs:{type:"text",placeholder:"Логин"},domProps:{value:e.request_body.login},on:{input:function(t){t.target.composing||e.$set(e.request_body,"login",t.target.value)}}})]),o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.request_body.password,expression:"request_body.password"}],attrs:{type:"password",placeholder:"Пароль"},domProps:{value:e.request_body.password},on:{input:function(t){t.target.composing||e.$set(e.request_body,"password",t.target.value)}}})]),o("button",{on:{click:e.signIn}},[e._v("Войти")])])},N=[],S={name:"SignIn",data:function(){return{request_body:{login:"",password:""},validationMessage:""}},methods:{signIn:function(){var e=this;C(this)&&M.a.post("/user/sign_in",this.request_body).then(function(t){console.log(t.headers),console.log(t.data),e.$store.commit("setUserData",t.data),console.log(e.$store.getters.checkUserData),e.$router.push("/account")}).catch(function(t){console.log(t.response.status),400===t.response.status?e.validationMessage="Неверный логин/пароль":e.$route.push("/error")})}}};function C(e){for(var t in e.request_body)if(""===e.request_body[t])return e.validationMessage="Заполните все поля формы",!1;return/[а-я]/g.test(e.request_body.login)?(e.validationMessage="Поля не должны содержать кириллицу",!1):(e.validationMessage="",!0)}var I=S,T=Object(i["a"])(I,E,N,!1,null,"3c070b45",null),A=T.exports,J=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[e.validationMessage?o("div",[e._v(e._s(e.validationMessage))]):e._e(),o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.request_body.first_name,expression:"request_body.first_name"}],attrs:{type:"text",placeholder:"Имя"},domProps:{value:e.request_body.first_name},on:{input:function(t){t.target.composing||e.$set(e.request_body,"first_name",t.target.value)}}})]),o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.request_body.last_name,expression:"request_body.last_name"}],attrs:{type:"text",placeholder:"Фамилия"},domProps:{value:e.request_body.last_name},on:{input:function(t){t.target.composing||e.$set(e.request_body,"last_name",t.target.value)}}})]),o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.request_body.group,expression:"request_body.group"}],attrs:{type:"text",placeholder:"Группа"},domProps:{value:e.request_body.group},on:{input:function(t){t.target.composing||e.$set(e.request_body,"group",t.target.value)}}})]),o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.request_body.login,expression:"request_body.login"}],attrs:{type:"text",placeholder:"Логин"},domProps:{value:e.request_body.login},on:{input:function(t){t.target.composing||e.$set(e.request_body,"login",t.target.value)}}})]),o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.request_body.vk_ref,expression:"request_body.vk_ref"}],attrs:{type:"text",placeholder:"vk.сom/id"},domProps:{value:e.request_body.vk_ref},on:{input:function(t){t.target.composing||e.$set(e.request_body,"vk_ref",t.target.value)}}})]),o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.request_body.password,expression:"request_body.password"}],attrs:{type:"password",placeholder:"Пароль"},domProps:{value:e.request_body.password},on:{input:function(t){t.target.composing||e.$set(e.request_body,"password",t.target.value)}}})]),o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.confirm_password,expression:"confirm_password"}],attrs:{type:"password",placeholder:"Подтверждение пароля"},domProps:{value:e.confirm_password},on:{input:function(t){t.target.composing||(e.confirm_password=t.target.value)}}})]),o("div",[o("button",{on:{click:e.signUp}},[e._v("Зарегистрироваться")])])])},H=[],L={name:"signUp",data:function(){return{request_body:{first_name:"",last_name:"",login:"",password:"",group:"",vk_ref:"vk.com/"},confirm_password:"",validationMessage:""}},methods:{signUp:function(){var e=this;R(this)&&(this.validationMessage="",M.a.post("/user/sign_up",this.request_body).then(function(t){console.log(t.data),console.log(t.status),e.$store.commit("setUserData",t.data),e.$router.push("/sign_in")}).catch(function(t){console.log(t),e.validationMessage="Поля заполнены неверно, пожалуйста заполните их соответсвенно подсказкам(которых пока нет)"}))}}};function R(e){for(var t in e.request_body)if(""===e.request_body[t])return e.validationMessage="Заполните все поля формы",!1;return e.request_body.password===e.confirm_password||(e.validationMessage="Пароли не совпадают!",e.valid)}var V=L,z=Object(i["a"])(V,J,H,!1,null,"50dd0d19",null),B=z.exports,F=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},G=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("h1",[e._v("Всё пошло по пизде")])])}],K={name:"ErrorPage"},Q=K,W=Object(i["a"])(Q,F,G,!1,null,"00e27463",null),X=W.exports;r["a"].use(d["a"]);var Y=new d["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:g},{path:"/account",name:"account",component:j},{path:"/auth",name:"auth",component:$},{path:"/sign_in",name:"sign_in",component:A},{path:"/sign_up",name:"sign_up",component:B},{path:"/error",name:"error",component:X}]}),Z=o("2f62");r["a"].use(Z["a"]);var ee=new Z["a"].Store({state:{user:{}},mutations:{setUserData:function(e,t){e.user=t},deleteUserData:function(e){e.user={}}},getters:{checkUserData:function(e){return"user_id"in e.user},getUserData:function(e){return e.user}},actions:{setUserData:function(e){e.commit("setUserData")}}});M.a.defaults.baseURL="http://5.23.54.233:5050",M.a.defaults.withCredentials=!0,r["a"].config.productionTip=!1,new r["a"]({router:Y,store:ee,render:function(e){return e(c)}}).$mount("#app")},"5c0b":function(e,t,o){"use strict";var r=o("e332"),n=o.n(r);n.a},cf05:function(e,t,o){e.exports=o.p+"img/logo.82b9c7a5.png"},e332:function(e,t,o){}});
//# sourceMappingURL=app.f424ccc0.js.map